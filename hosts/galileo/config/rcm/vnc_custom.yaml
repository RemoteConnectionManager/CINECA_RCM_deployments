plugins:
  services:
    - 'lib.service.TurboVNCServerCustom'



old_client:
  queue_entries:
    ssh:
      SCHEDULER : "SSH"

  vnc_entries:
    VNC-1706-flxbx:
      SERVICE : "VNC-1706"
      SERVICE.COMMAND : "TurboVNC"
      SERVICE.COMMAND.WM : "Fluxbox"
    VNC-1706-KDE:
      SERVICE : "VNC-1706"
      SERVICE.COMMAND : "TurboVNC"
      SERVICE.COMMAND.WM : "KDE"
    VNC-1911-flxbx:
      SERVICE : "VNC-1911"
      SERVICE.COMMAND : "TurboVNC"
      SERVICE.COMMAND.WM : "Fluxbox"
    VNC-1911-opnbx:
      SERVICE : "VNC-1911"
      SERVICE.COMMAND : "TurboVNC"
      SERVICE.COMMAND.WM : "Openbox"
    VNC-1911-opnbx_prview_5.5.2:
      SERVICE : "VNC-1911"
      SERVICE.COMMAND : "TurboVNC"
      SERVICE.COMMAND.WM : "Openbox_GPU_only"



defaults:
  TOP:
    SERVICE :
#      VNC_v002 :
#        description : "TurboVNC stack from ba modules "
#        COMMAND :
#          TurboVNC:
#            description : "TurboVNC session from stack in modules  "
#            substitutions :
#              SETUP: |
#                module use /gpfs/work/DATA/spack/v002/RCM_spack_deploy/deploy/base_spack_devel/spack/share/spack/modules/linux-centos7-x86_64
#                module use /gpfs/work/DATA/spack/v002/RCM_spack_deploy/deploy/rcm_chained/spack/share/spack/modules/linux-centos7-x86_64
#                module use /gpfs/work/DATA/spack/v002/RCM_spack_deploy/deploy/insitu_chained/spack/share/spack/modules/linux-centos7-x86_64
#                module load xdpyinfo
#                module load virtualgl
#
#
#            WM :
#              Fluxbox :
#                description : "Start Fluxbox as Window manager for the VNC session (lightest choice)"
#                substitutions :
#                  WM_COMMAND: "-xstartup ${RCM_HOME}/bin/config/xstartup.fluxbox"
#                  WM_SETUP: |
#                    module load fluxbox
#                    module load pcmanfm
#                    module load lxde-lxterminal


      VNC-1911 :
        description : |
          TurboVNC server session based on spack built, linux-centos7-haswell sw stack, provided by:
            module use /gpfs/work/cin_rcmmgr/spack/RCM_spack_deploy/deploy/rcm_chained/modules/linux-centos7-haswell
            module use /gpfs/work/cin_rcmmgr/spack/RCM_spack_deploy/deploy/paraview_chained_rcm/modules/linux-centos7-haswell


        COMMAND :
          description : |
            This TurboVNC sw stack preloads the following modules:
              turbovnc
              xdpyinfo
              vrtualgl
            provides modules:
              paraview 5.5.2
              visit (3.0.1)
              vtk (8.1.2)
              gnuplot (5.2.5)
              kdiff3
              image-magick



          TurboVNC:
            substitutions :
              SETUP: |
                module use /gpfs/work/cin_rcmmgr/spack/RCM_spack_deploy/deploy/rcm_chained/modules/linux-centos7-haswell
                module use /gpfs/work/cin_rcmmgr/spack/RCM_spack_deploy/deploy/paraview_chained_rcm/modules/linux-centos7-haswell
                module load xdpyinfo
                module load virtualgl


            WM :
              Openbox :
                description : |
                  The VNC session start LXDE Openbox as Window manager,
                   should be supported on All nodes ( login, cpu-only, cpu+gpu)
                   preloads following additional modules:
                    module load openbox
                    module load pcmanfm
                    module load lxde-lxterminal
                    module load tint2
                    module load gpicview
                    module load leafpa


                substitutions :
                  WM_COMMAND: "-xstartup ${RCM_HOME}/bin/config/xstartup.openbox"
                  WM_SETUP: |
                    module load openbox
                    module load pcmanfm
                    module load lxde-lxterminal
                    module load tint2
                    module load gpicview
                    module load leafpad


              Openbox_GPU_only:
                description : |
                  The VNC session start LXDE Openbox as Window manager,
                  is supported only on nodes with GPU
                  preloads openbox modules:
                    module load openbox pcmanfm lxde-lxterminaltint2 gpicview leafpad
                  these gui tools:
                    module load gnuplot (5.2.5)
                    module load kdiff3
                    module load image-magick
                  as well these modules for Opengl appliacations that require vglrun prepend:
                    module load paraview (5.5.2) --> vglrun paraview
                    module load visit (3.0.1) --> vglrun visit
                    module load vtk (8.1.2) --> vglrun vtkpython




                substitutions :
                  WM_COMMAND: "-xstartup ${RCM_HOME}/bin/config/xstartup.openbox"
                  WM_SETUP: |
                    module load openbox
                    module load pcmanfm
                    module load lxde-lxterminal
                    module load tint2
                    module load gpicview
                    module load image-magick
                    module load leafpad
                    module load kdiff3
                    module load gnuplot
                    module load visit
                    module load paraview



              Fluxbox :
                description : |
                  The VNC session start Fluxbox  as Window manager,
                   should be supported on All nodes ( login, cpu-only, cpu+gpu)
                   preloads following additional modules:
                    module load fluxbox
                    module load pcmanfm
                    module load lxde-lxterminal

                substitutions :
                  WM_COMMAND: "-xstartup ${RCM_HOME}/bin/config/xstartup.fluxbox"
                  WM_SETUP: |
                    module load fluxbox
                    module load pcmanfm
                    module load lxde-lxterminal



      VNC-1706 :
        description : |
          Legacy TurboVNC stack available from previously install modules on base profile
          As the old virtualgl module seem not working, it has ben replaced



        COMMAND :
          description : |
            This TurboVNC sw stack should be supported on all nodes,preloads the following base modules:
              module load turbovnc
            preloads custom virtualgl from:
              module load /cineca/prod/spack/v001/RCM_spack_deploy/deploy/galileo_dev00/insitu01/spack/share/spack/modules/linux-centos7-x86_64/virtualgl/2.5.2-gcc-7.3.0-cs
            use system xdpyinfo


          TurboVNC:
            substitutions:
              SETUP: |
                module load /cineca/prod/spack/v001/RCM_spack_deploy/deploy/galileo_dev00/insitu01/spack/share/spack/modules/linux-centos7-x86_64/virtualgl/2.5.2-gcc-7.3.0-cs 



            WM:
              Fluxbox :
                description : |
                  The VNC session start Fluxbox  as Window manager,
                   should be supported on All nodes ( login, cpu-only, cpu+gpu)
                   preloads following additional modules:
                    module load fluxbox
                    module load pcmanfm
                  The preloaded vglrun command shouls support modules profile visual and eng


                substitutions :
                  WM_COMMAND: "-xstartup ${RCM_HOME}/bin/config/xstartup.fluxbox"
                  WM_SETUP: |
                    module load fluxbox
                    module load pcmanfm
                    #module load profile/visual


              KDE :
                description : "Start system KDE  as Window manager REQUIRE SSH scheduler (login only)"
                substitutions :
                  WM_COMMAND: "-xstartup ${RCM_HOME}/bin/config/xstartup.kde"
                  WM_SETUP: ""




#              Fluxbox_bare :
#                description : "Start Fluxbox as Window manager DOES NOT WORK ON gll_usr_prod" 
#                substitutions :
#                  WM_COMMAND: "-xstartup ${RCM_HOME}/bin/config/xstartup.fluxbox"
#                  WM_SETUP: |
#                    module load fluxbox
#                    module load pcmanfm


#      VNC_v001 :
#        description : "using modules in /cineca/prod/spack/v001/RCM_spack_deploy/deploy/galileo_dev00/insitu01/spack/share/spack/modules/linux-centos7-x86_64 "
#        COMMAND :
#          description : "TurboVNC sw stack, paraview_5.5.1 from /galileo/prod/spack/v001"
#          TurboVNC:
#            description : "TurboVNC and other modules from /galileo/prod/spack/v001/RCM_spack_deploy/deploy/galileo_dev00/install/linux-centos7-x86_64/gcc-7.3.0 "
#            substitutions :
#              SETUP: |
#                module use /cineca/prod/spack/v001/RCM_spack_deploy/deploy/galileo_dev00/insitu01/spack/share/spack/modules/linux-centos7-x86_64
#                module load xdpyinfo
#                module load virtualgl


#            WM :
#              Fluxbox_paraview_5.5.1 :
#                description : "Start Fluxbox as Window manager for the VNC session (lightest choice)"
#                substitutions :
#                  WM_COMMAND: "-xstartup ${RCM_HOME}/bin/config/xstartup.fluxbox"
#                  WM_SETUP: |
#                    module load fluxbox
#                    module load pcmanfm
#                    module load lxde-lxterminal
#                    module load paraview


